# HDMI PROCESSING AND OVERLAY (ON-SCREEN DISPLAY) USING THE CYCLONE V

Duration: May - June 2019

Author: Li Ding

Collaborator: Zhe Bai

## Introduction

In this lab session, we created a program to display a re-configurable picture via HDMI by using FPGA and Analog Devices ADV7513 HDMI Transmitter. Two IP blocks were used, PLL block for generating different frequency clock and ROM block for creating lookup table.

A functional block diagram showed below is a diagram illustrates the system’s overall inputs and outputs.

<img width="343" alt="functional_block_diagram" src="https://user-images.githubusercontent.com/15827364/79717957-4e0db480-831e-11ea-9071-a0f1fa1f5b72.PNG">

## Module Design

In this design, we used a PLL to generate 25.175MHz clock to drive Rom block and HDMI module. A ROM was used to store the target image that would be transmit to the monitor. This two functional blocks were generated in the Quartus platform. 

Mostly, the focus of this design is the I2C bus design. Two signal lines are used for I2C transaction which are SDA and SCL. To initialise a communication between master device and slave device, a start signal needs to be generated by pulling SDA down while SCL stays high. Then each byte of data would be sent followed by a acknowledge signal from slave device. After the complete transmission of three-byte data, the stop signal is sent from the master device to end the transmission by pulling SDA from low to high while keeping SCL high.

So, the main inputs of the I2C controller contain reference clock, reset, 24 bits configuration data (include device address, register address and data), start signal and stop signal respectively. On the other hand, the outputs include SCL, ready signal, end signal and a bidirectional SDA. Through I2C controller, the ADV7513 chip can be configured by sending each valid configuration data, start signal and stop signal.

Lastly, to design a HDMI module, the general idea is setting two ‘counters’, counting horizontal pixels (640+48+96+16=800 in total) and vertical pixels (480+11+2+31=524 in total), the counters will reset to 0 if they reach to the limits (800 on row and 524 on the column). Picture below illustrates the active pixels and V/H sync area.

After each module is built up and simulated, the top-level entity would composite them together as the functional block diagram shows. And the final implementation can be test on board. 
